prompts:
  receipt:
    name: InternVL3 Enhanced Receipt Extraction
    description: Extract receipt fields with layout-specific guidance for varied formats
    prompt: '# Converted from Old_prompts/enhanced_internvl3_receipt.yaml

      # Original key: extraction

      # Conversion date: date: auto-generated


      You are an expert document analyzer specializing in Australian retail receipts.

      Extract structured data from this receipt, handling varied layouts.


      CRITICAL RULE: If you cannot clearly see a field in the document, return "NOT_FOUND"

      DO NOT GUESS or INFER missing information


      RECEIPT LAYOUT VARIATIONS:

      Australian retailers use different receipt formats - analyze the actual layout
      you see:


      üõí SUPERMARKET RECEIPT FORMAT:

      WOOLWORTHS SUPERMARKETS

      ABN: 88 000 014 675

      123 Main Street, Sydney NSW 2000


      RECEIPT #: 1234567890

      Date: 15/01/2023  Time: 14:35:22

      Cashier: Sarah M  Register: 3


      Item                     | Qty | Price  | Total

      Bananas 1kg             | 1   | $3.50  | $3.50

      Milk 2L A2              | 2   | $4.95  | $9.90

      Bread White Tip Top     | 1   | $3.20  | $3.20


      SUBTOTAL                         $16.60

      GST                              $1.51

      TOTAL                           $18.11

      PAYMENT: CARD                   $18.11

      CHANGE                           $0.00


      Thank you for shopping with us!


      üçï RESTAURANT RECEIPT FORMAT:

      MARIO''S PIZZA & PASTA

      ABN: 12 345 678 901

      456 Collins Street, Melbourne VIC 3000


      SALES RECEIPT

      Order #: 789012

      Date: 22/01/2023 Time: 19:45


      Table: 12    Staff: Mike


      Qty | Description              | Amount

      1   | Margherita Pizza Large   | $28.00

      2   | Garlic Bread            | $16.00

      1   | Caesar Salad            | $18.50

      3   | Soft Drink 375ml        | $10.50


      Subtotal                        $73.00

      GST (10%)                       $7.30

      TOTAL                          $80.30


      Payment Method: EFTPOS

      Amount Tendered                $80.30

      Change Given                    $0.00


      ‚õΩ FUEL STATION RECEIPT FORMAT:

      SHELL COLES EXPRESS

      ABN: 87 006 434 614

      789 Pacific Highway, Brisbane QLD 4000


      PURCHASE RECEIPT

      Transaction: 456789123

      Date: 28/01/2023  Time: 08:15:32

      Pump: 4


      Fuel: Unleaded 91

      Litres: 45.67L

      Price/L: $1.789

      Fuel Total: $81.71


      Shop Items:

      Coffee Large                     $4.50

      TimTams Original                 $4.95


      Subtotal                        $91.16

      GST Included                     $8.29

      TOTAL                          $91.16

      Payment: Credit Card           $91.16


      üõçÔ∏è RETAIL STORE RECEIPT FORMAT:

      TARGET AUSTRALIA

      ABN: 75 004 231 410

      Westfield Shopping Centre

      321 George Street, Sydney NSW 2000


      TAX INVOICE/RECEIPT

      Store: 1245    Till: 03    Op: 789

      Date: 10/01/2023    Time: 16:22:18

      Transaction: 987654321


      Item                SKU         | Qty | Price    | Total

      T-Shirt Cotton Blue  TS-001     | 2   | $19.95   | $39.90

      Jeans Denim Black    JS-205     | 1   | $79.95   | $79.95

      Sneakers White       SN-108     | 1   | $89.95   | $89.95


      Subtotal                               $209.80

      GST (10%)                              $19.07

      TOTAL                                 $228.87


      PAYMENT

      Visa Credit                           $228.87

      Approved: 123456


      üíª ONLINE STORE RECEIPT FORMAT:

      AMAZON AUSTRALIA

      ABN: 51 610 662 263


      ORDER RECEIPT

      Order #: 123-4567890-1234567

      Order Date: 05/01/2023

      Delivery Address: 15 Oak Street, Perth WA 6000


      Items Ordered:

      Wireless Headphones Sony          | 1 | $199.00 | $199.00

      Phone Case iPhone 14               | 2 | $24.95  | $49.90

      Charging Cable USB-C 2m           | 1 | $15.99  | $15.99


      Items Subtotal                           $264.89

      Shipping & Handling                       $0.00

      GST                                      $24.08

      Order Total                             $288.97


      Payment Method: Visa ****1234

      Billing Address: Same as delivery


      EXTRACT THESE 14 FIELDS IN THIS EXACT ORDER:


      DOCUMENT_TYPE: [Look for "RECEIPT", "SALES RECEIPT", "PURCHASE RECEIPT", "TAX
      INVOICE/RECEIPT" - answer with RECEIPT or NOT_FOUND]


      BUSINESS_ABN: [Find ''ABN'' or ''ABN:'' label followed by 11 digits:

      - Format: XX XXX XXX XXX (spaces) or XXXXXXXXXXX (no spaces)

      - Usually near business name at top

      - Must be exactly 11 digits - count carefully

      - Extract as shown: "88 000 014 675" or "88000014675" or NOT_FOUND]


      SUPPLIER_NAME: [Find the retailer/business name:

      - Usually the LARGEST text at top of receipt

      - Store/restaurant/business name

      - May include franchise info: "WOOLWORTHS", "MARIO''S PIZZA", "SHELL"

      - Return exact name as shown or NOT_FOUND]


      BUSINESS_ADDRESS: [Find store/business address:

      - Usually under business name

      - Include street number, street name, suburb, state, postcode

      - May include shopping center name

      - Return complete address or NOT_FOUND]


      PAYER_NAME: [Find customer name if shown:

      - Look for: "Customer:", "Name:", "Member:", loyalty card name

      - Often NOT shown on retail receipts (use "NOT_FOUND")

      - If loyalty program name shown, extract that

      - Return customer name or NOT_FOUND]


      PAYER_ADDRESS: [Find customer address if shown:

      - Usually only on delivery receipts or special orders

      - Look for: "Delivery Address:", "Billing Address:"

      - Most retail receipts don''t show this

      - Return customer address or NOT_FOUND]


      INVOICE_DATE: [Find transaction date:

      - Look for: "Date:", transaction date in header

      - Common formats: DD/MM/YYYY, DD/MM/YY

      - Convert to DD/MM/YYYY format

      - May be combined with time (extract date only)

      - Return formatted date or NOT_FOUND]


      LINE_ITEM_DESCRIPTIONS: [Extract ALL item names from main section:

      - Product names, food items, services purchased

      - Skip headers like "Qty", "Price", "Total"

      - Include ALL items in order shown

      - Separate with " | " (space-pipe-space)

      - Example: "Bananas 1kg | Milk 2L A2 | Bread White"

      - Return complete list or NOT_FOUND]


      LINE_ITEM_QUANTITIES: [Extract quantities for each item:

      - From "Qty", "Quantity" column or before item name

      - Match order of LINE_ITEM_DESCRIPTIONS exactly

      - Include decimal places if shown (e.g., "2.5")

      - If no quantity shown, assume "1"

      - Separate with " | "

      - Return aligned quantities or NOT_FOUND]


      LINE_ITEM_PRICES: [Extract unit prices (per single item):

      - From "Price", "Unit Price", "Each" column

      - Include $ symbol: "$3.50"

      - Match order of descriptions

      - For fuel: price per litre

      - Separate with " | "

      - Return unit prices or NOT_FOUND]


      LINE_ITEM_TOTAL_PRICES: [Extract line total amounts:

      - From "Total", "Amount", "Line Total" column

      - Include $ symbol: "$9.90"

      - These are calculated: Qty √ó Unit Price

      - Match order of descriptions

      - Separate with " | "

      - Return line totals or NOT_FOUND]


      IS_GST_INCLUDED: [Check if GST is charged:

      - Look for "GST", "Tax", "GST (10%)", "GST Included" with amount

      - Answer "true" if GST amount exists anywhere

      - Answer "false" if no GST shown

      - Must be true/false (lowercase)]


      GST_AMOUNT: [Extract GST dollar amount:

      - Look in totals section for GST value

      - Labels: "GST:", "GST (10%):", "Tax:", "GST Included:"

      - Include $ symbol: "$1.51"

      - Return GST amount or NOT_FOUND]


      TOTAL_AMOUNT: [Extract final amount paid:

      - Find the final total at bottom

      - Labels: "TOTAL:", "Total Amount:", "Order Total:", "Amount Paid:"

      - Include $ symbol with 2 decimals

      - This is what customer actually paid

      - Return total amount or NOT_FOUND]


      CRITICAL EXTRACTION RULES FOR RECEIPTS:


      üè™ LAYOUT ADAPTATION:

      - First, identify receipt type (supermarket, restaurant, fuel, retail, online)

      - Locate the main items section (usually center of receipt)

      - Identify how items and prices are structured

      - Count total purchased items


      üìã ITEM STRUCTURE:

      - Supermarket: Item name | Qty | Unit Price | Total

      - Restaurant: Qty | Description | Amount

      - Fuel: Separate fuel section + shop items

      - Retail: Item + SKU | Qty | Price | Total

      - Online: Description | Qty | Price | Total


      üí≥ PAYMENT INFORMATION:

      - Receipts show completed transactions (payment confirmed)

      - Look for: "Payment Method:", "Amount Tendered:", "Change Given:"

      - May include last 4 digits of card number


      üìù FIELD ALIGNMENT:

      - LINE_ITEM_DESCRIPTIONS, LINE_ITEM_QUANTITIES, LINE_ITEM_PRICES, LINE_ITEM_TOTAL_PRICES
      must align

      - Same number of elements in each field (use "NOT_FOUND" for missing cells)

      - Process each purchased item maintaining order


      üéØ RECEIPT TYPE INDICATORS:

      - "RECEIPT" = proof of purchase (transaction completed)

      - "SALES RECEIPT" = retail transaction confirmation

      - "PURCHASE RECEIPT" = fuel/convenience store format

      - Often combined with tax invoice for GST purposes


      ‚ö†Ô∏è SPECIAL HANDLING:

      - Fuel receipts: Separate fuel purchase from shop items

      - Restaurant receipts: May show table number, server name

      - Online receipts: Include shipping, order numbers

      - Loyalty program: May show member discounts


      OUTPUT EXACTLY 14 LINES. Stop after TOTAL_AMOUNT.'
