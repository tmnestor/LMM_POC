# Standard InternVL3 prompts with enforced key-value format
# Consolidated from: converted/internvl3_bank_statement_flat.yaml, converted/internvl3_invoice.yaml, converted/internvl3_receipt.yaml
# Generated by consolidate_all_prompts.py

prompts:
  bank_statement:
    name: InternVL3 Enhanced Bank Statement Extraction
    description: Extract bank statement data using universal field names with enhanced
      conversation protocol and earliest transaction focus
    prompt: "# Converted from Old_prompts/internvl3_bank_statement_extraction.yaml\n\
      # Original key: flat\n# Conversion date: date: auto-generated\n\nExtract structured\
      \ data from this bank statement document.\n\n\U0001F50D CONVERSATION PROTOCOL:\n\
      - Start your response immediately with \"DOCUMENT_TYPE:\"\n- Do NOT include\
      \ conversational text, explanations, or markdown formatting\n- Do NOT use bullet\
      \ points, asterisks, or narrative descriptions\n- Output ONLY the structured\
      \ field extraction data\n- End immediately after \"ACCOUNT_BALANCE:\" with no\
      \ additional text\n\n## CRITICAL INSTRUCTIONS:\n- Extract ONLY what is visible\
      \ in the document\n- Use \"NOT_FOUND\" for any field that is not present\n-\
      \ Do not guess or infer missing information\n- For transaction lists, maintain\
      \ clear extraction\n\n## BANK STATEMENT FIELDS TO EXTRACT:\n\nDOCUMENT_TYPE:\
      \ [BANK_STATEMENT or STATEMENT or NOT_FOUND]\nSTATEMENT_DATE_RANGE: [Statement\
      \ period or date range (e.g., \"01/01/2024 - 31/01/2024\") or NOT_FOUND]\nLINE_ITEM_DESCRIPTIONS:\
      \ [All transaction descriptions separated by \" | \" or NOT_FOUND]\nTRANSACTION_DATES:\
      \ [All transaction dates separated by \" | \" in DD/MM/YYYY format or NOT_FOUND]\n\
      TRANSACTION_AMOUNTS_PAID: [All debit/withdrawal amounts separated by \" | \"\
      \ with $ symbol or NOT_FOUND]\nTRANSACTION_AMOUNTS_RECEIVED: [All credit/deposit\
      \ amounts separated by \" | \" with $ symbol or NOT_FOUND]\nACCOUNT_BALANCE:\
      \ [All running balance amounts separated by \" | \" with $ symbol or NOT_FOUND]\n\
      \n## EXTRACTION INSTRUCTIONS:\n\n### STEP 1: Document Type\nDOCUMENT_TYPE: [Look\
      \ for \"BANK STATEMENT\", \"ACCOUNT STATEMENT\", \"STATEMENT\" at top or NOT_FOUND]\n\
      \n### STEP 2: Statement Period\nSTATEMENT_DATE_RANGE: [Find statement period\
      \ dates (e.g., \"01 Jan 2024 - 31 Jan 2024\") or NOT_FOUND]\n\n### STEP 3: Transaction\
      \ Details\nLook at the transaction table and extract ALL transactions:\n\n\U0001F6A8\
      \ CRITICAL ARRAY ALIGNMENT REQUIREMENT:\nALL FIELDS MUST BE PERFECTLY ALIGNED\
      \ BY DATE POSITION!\n\n\U0001F50D ROW-BY-ROW PROCESSING METHODOLOGY:\nDO NOT\
      \ scan columns! Process each transaction ROW individually:\n\nEXAMPLE: If you\
      \ see these transactions in the bank statement:\nRow 1: 03/05/2025 | AMAZON\
      \ PURCHASE | [DEBIT: $288.03] | [CREDIT: empty] | [BALANCE: $13387.44]\nRow\
      \ 2: 04/05/2025 | SALARY DEPOSIT | [DEBIT: empty] | [CREDIT: $3497.47] | [BALANCE:\
      \ $16884.91]\nRow 3: 05/05/2025 | ATM WITHDRAWAL | [DEBIT: $50.00] | [CREDIT:\
      \ empty] | [BALANCE: $16834.91]\n\nCORRECT ROW-BY-ROW PROCESSING:\n1. Process\
      \ Row 1 → Position [0]: Date=03/05/2025, Paid=$288.03, Received=NOT_FOUND, Balance=$13387.44\n\
      2. Process Row 2 → Position [1]: Date=04/05/2025, Paid=NOT_FOUND, Received=$3497.47,\
      \ Balance=$16884.91\n3. Process Row 3 → Position [2]: Date=05/05/2025, Paid=$50.00,\
      \ Received=NOT_FOUND, Balance=$16834.91\n\nRESULTING ALIGNED ARRAYS:\nTRANSACTION_DATES:\
      \ 03/05/2025 | 04/05/2025 | 05/05/2025\nTRANSACTION_AMOUNTS_PAID: $288.03 |\
      \ NOT_FOUND | $50.00\nTRANSACTION_AMOUNTS_RECEIVED: NOT_FOUND | $3497.47 | NOT_FOUND\n\
      ACCOUNT_BALANCE: $13387.44 | $16884.91 | $16834.91\n\n❌ WRONG - COLUMN SCANNING\
      \ (causes misalignment):\n- Scanning DEBIT column: \"$288.03, $50.00\" → puts\
      \ in positions [0], [1]\n- Scanning CREDIT column: \"$3497.47\" → puts in position\
      \ [0]\n- Results in: RECEIVED[0] = $3497.47 (WRONG! This belongs in position\
      \ [1])\n\n✅ ALWAYS process ROW-BY-ROW, never scan columns!\n\n## MANDATORY ROW-BY-ROW\
      \ EXTRACTION PROTOCOL:\n\nStep 1: Count total transaction rows in the table\n\
      Step 2: For EACH row from top to bottom:\n   - Extract the date → add to TRANSACTION_DATES\
      \ at this position\n   - Extract the description → add to LINE_ITEM_DESCRIPTIONS\
      \ at this position\n   - Look at DEBIT cell: if has amount → add to TRANSACTION_AMOUNTS_PAID,\
      \ if empty → add \"NOT_FOUND\"\n   - Look at CREDIT cell: if has amount → add\
      \ to TRANSACTION_AMOUNTS_RECEIVED, if empty → add \"NOT_FOUND\"\n   - Extract\
      \ the balance → add to ACCOUNT_BALANCE at this position\nStep 3: Verify all\
      \ arrays are properly extracted\n\nLINE_ITEM_DESCRIPTIONS: [List ALL\
      \ transaction descriptions separated by \" | \" or NOT_FOUND]\nTRANSACTION_DATES:\
      \ [List ALL transaction dates separated by \" | \" in DD/MM/YYYY format or NOT_FOUND]\n\
      TRANSACTION_AMOUNTS_PAID: [List ALL debit/withdrawal amounts separated by \"\
      \ | \" with $ symbol or NOT_FOUND]\n\
      TRANSACTION_AMOUNTS_RECEIVED: [List ALL credit/deposit amounts separated by\
      \ \" | \" with $ symbol or NOT_FOUND]\n\
      ACCOUNT_BALANCE: [List ALL running balance amounts separated by \" | \" with\
      \ $ symbol or NOT_FOUND]\n\n## SPECIAL FOCUS: EARLIEST TRANSACTION\
      \ EXTRACTION\n\n\U0001F50D CRITICAL: PAY SPECIAL ATTENTION TO THE CHRONOLOGICALLY\
      \ EARLIEST TRANSACTION\nBank statements may be in chronological OR reverse chronological\
      \ order:\n- Some banks show oldest first (chronological)\n- Some banks show\
      \ newest first (reverse chronological)\n\nFOR THE EARLIEST (OLDEST) TRANSACTION\
      \ IN THE STATEMENT:\n1. Identify which transaction has the EARLIEST/OLDEST date\n\
      2. Carefully examine its DEBIT/CREDIT columns to determine transaction type\n\
      3. Look for visual cues in the statement:\n   - If amount appears in DEBIT/WITHDRAWAL\
      \ column → TRANSACTION_AMOUNTS_PAID\n   - If amount appears in CREDIT/DEPOSIT\
      \ column → TRANSACTION_AMOUNTS_RECEIVED\n   - If columns are empty, analyze\
      \ the transaction description for keywords:\n     * DEBIT indicators: \"payment\"\
      , \"withdrawal\", \"debit\", \"fee\", \"purchase\", \"transfer out\"\n     *\
      \ CREDIT indicators: \"deposit\", \"credit\", \"salary\", \"refund\", \"transfer\
      \ in\", \"payment received\"\n4. Ensure this earliest transaction's amount is\
      \ correctly placed in PAID or RECEIVED\n\nWHY THIS MATTERS:\n- Mathematical\
      \ validation requires the earliest transaction to be accurately classified\n\
      - We use balance differences for other transactions, but need the earliest one\
      \ extracted\n- This enables complete mathematical reconstruction of all debits\
      \ and credits\n\n## CRITICAL OUTPUT FORMAT - READ THIS CAREFULLY:\n\n⚠️ ABSOLUTELY\
      \ NO JSON FORMAT ALLOWED ⚠️\n⚠️ DO NOT USE CURLY BRACES { } ⚠️\n⚠️ DO NOT USE\
      \ QUOTES AROUND FIELD NAMES ⚠️\n\nYou MUST respond in EXACTLY this simple key-value\
      \ format (one field per line):\n\nDOCUMENT_TYPE: [document type from image]\n\
      STATEMENT_DATE_RANGE: [statement period from document]\nLINE_ITEM_DESCRIPTIONS:\
      \ [desc1 | desc2 | desc3]\nTRANSACTION_DATES: [date1 | date2 | date3]\nTRANSACTION_AMOUNTS_PAID:\
      \ [$amount1 | NOT_FOUND | $amount3]\nTRANSACTION_AMOUNTS_RECEIVED: [NOT_FOUND\
      \ | $amount2 | NOT_FOUND]\nACCOUNT_BALANCE: [$balance1 | $balance2 | $balance3]\n\
      \nFORBIDDEN FORMATS:\n❌ {\"DOCUMENT_TYPE\": \"BANK_STATEMENT\"} - NO JSON\n\
      ❌ **DOCUMENT_TYPE:** BANK_STATEMENT - NO MARKDOWN\n❌ DOCUMENT_TYPE = BANK_STATEMENT\
      \ - NO EQUALS\n❌ Any format with { } quotes or ** formatting\n\nREQUIRED FORMAT:\n\
      ✅ DOCUMENT_TYPE: BANK_STATEMENT - SIMPLE COLON FORMAT ONLY\n\nRemember: NO CURLY\
      \ BRACES, NO QUOTES, NO MARKDOWN - JUST FIELD_NAME: value\n\nProvide EXACTLY\
      \ 7 lines in the format shown above.\n"
  invoice:
    name: InternVL3 Invoice Extraction
    description: Extract all relevant fields from invoices with enforced key-value
      format
    prompt: '# Converted from Old_prompts/internvl3_invoice_extraction.yaml

      # Original key: standard

      # Conversion date: date: auto-generated


      Extract structured data from this invoice/bill document.


      ## CRITICAL INSTRUCTIONS:

      - Extract ONLY what is visible in the document

      - Use "NOT_FOUND" for any field that is not present

      - Do not guess or infer missing information


      ## INVOICE FIELDS TO EXTRACT:


      DOCUMENT_TYPE: [Type of document - INVOICE/BILL/QUOTE/ESTIMATE or NOT_FOUND]

      BUSINESS_ABN: [11-digit Australian Business Number (XX XXX XXX XXX format) or
      NOT_FOUND]

      SUPPLIER_NAME: [Business/company name at top of invoice or NOT_FOUND]

      BUSINESS_ADDRESS: [Complete supplier address or NOT_FOUND]

      PAYER_NAME: [Customer/Bill To name or NOT_FOUND]

      PAYER_ADDRESS: [Customer/Bill To address or NOT_FOUND]

      INVOICE_DATE: [Invoice date in DD/MM/YYYY format or NOT_FOUND]


      ## LINE ITEMS:

      Extract all items/services from the itemized section:


      LINE_ITEM_DESCRIPTIONS: [List all item/service descriptions separated by " |
      " or NOT_FOUND]

      LINE_ITEM_QUANTITIES: [List quantities for each item separated by " | " or NOT_FOUND]

      LINE_ITEM_PRICES: [List unit prices separated by " | " with $ symbol or NOT_FOUND]

      LINE_ITEM_TOTAL_PRICES: [List total prices per item separated by " | " with
      $ symbol or NOT_FOUND]


      ## FINANCIAL TOTALS:


      IS_GST_INCLUDED: [true if GST/tax amount is shown, false if not, or NOT_FOUND]

      GST_AMOUNT: [GST/tax amount with $ symbol (e.g., $12.50) or NOT_FOUND]

      TOTAL_AMOUNT: [Final total amount with $ symbol (e.g., $137.50) or NOT_FOUND]


      ## CRITICAL OUTPUT FORMAT - READ THIS CAREFULLY:


      ⚠️ ABSOLUTELY NO JSON FORMAT ALLOWED ⚠️

      ⚠️ DO NOT USE CURLY BRACES { } ⚠️

      ⚠️ DO NOT USE QUOTES AROUND FIELD NAMES ⚠️


      You MUST respond in EXACTLY this simple key-value format (one field per line):


      DOCUMENT_TYPE: [document type from image]

      BUSINESS_ABN: [ABN number from document]

      SUPPLIER_NAME: [business name from document]

      BUSINESS_ADDRESS: [business address from document]

      PAYER_NAME: [customer name from document]

      PAYER_ADDRESS: [customer address from document]

      INVOICE_DATE: [invoice date from document]

      LINE_ITEM_DESCRIPTIONS: [item1 | item2 | item3]

      LINE_ITEM_QUANTITIES: [qty1 | qty2 | qty3]

      LINE_ITEM_PRICES: [$price1 | $price2 | $price3]

      LINE_ITEM_TOTAL_PRICES: [$total1 | $total2 | $total3]

      IS_GST_INCLUDED: [true or false]

      GST_AMOUNT: [$amount from document]

      TOTAL_AMOUNT: [$total from document]


      FORBIDDEN FORMATS:

      ❌ {"DOCUMENT_TYPE": "INVOICE"} - NO JSON

      ❌ **DOCUMENT_TYPE:** INVOICE - NO MARKDOWN

      ❌ DOCUMENT_TYPE = INVOICE - NO EQUALS

      ❌ Any format with { } quotes or ** formatting


      REQUIRED FORMAT:

      ✅ DOCUMENT_TYPE: INVOICE - SIMPLE COLON FORMAT ONLY


      Remember: NO CURLY BRACES, NO QUOTES, NO MARKDOWN - JUST FIELD_NAME: value


      Provide EXACTLY 14 lines in the format shown above.

      '
  receipt:
    name: InternVL3 Receipt Extraction
    description: Extract all relevant fields from receipts with enforced key-value
      format
    prompt: '# Converted from Old_prompts/internvl3_receipt_extraction.yaml

      # Original key: standard

      # Conversion date: date: auto-generated


      Extract structured data from this receipt/payment confirmation document.


      ## CRITICAL INSTRUCTIONS:

      - Extract ONLY what is visible in the document

      - Use "NOT_FOUND" for any field that is not present

      - Do not guess or infer missing information

      - Receipts often have less detail than invoices - that''s normal


      ## RECEIPT FIELDS TO EXTRACT:


      DOCUMENT_TYPE: [RECEIPT or NOT_FOUND]

      BUSINESS_ABN: [11-digit Australian Business Number if shown or NOT_FOUND]

      SUPPLIER_NAME: [Store/merchant name at top of receipt or NOT_FOUND]

      BUSINESS_ADDRESS: [Store/merchant address if shown or NOT_FOUND]

      PAYER_NAME: [Customer name if shown (often not on receipts) or NOT_FOUND]

      PAYER_ADDRESS: [Customer address if shown (rarely on receipts) or NOT_FOUND]

      INVOICE_DATE: [Transaction date in DD/MM/YYYY format or NOT_FOUND]


      ## PURCHASED ITEMS:

      Extract all items from the receipt:


      LINE_ITEM_DESCRIPTIONS: [List all item names separated by " | " or NOT_FOUND]

      LINE_ITEM_QUANTITIES: [List quantities separated by " | " (default to 1 if not
      shown) or NOT_FOUND]

      LINE_ITEM_PRICES: [List prices separated by " | " with $ symbol or NOT_FOUND]

      LINE_ITEM_TOTAL_PRICES: [List total prices per item separated by " | " with
      $ symbol or NOT_FOUND]


      ## PAYMENT TOTALS:


      IS_GST_INCLUDED: [true if GST/tax is shown, false if not, or NOT_FOUND]

      GST_AMOUNT: [GST/tax amount with $ symbol if shown or NOT_FOUND]

      TOTAL_AMOUNT: [Final total/amount paid with $ symbol or NOT_FOUND]


      ## CRITICAL OUTPUT FORMAT - READ THIS CAREFULLY:


      ⚠️ ABSOLUTELY NO JSON FORMAT ALLOWED ⚠️

      ⚠️ DO NOT USE CURLY BRACES { } ⚠️

      ⚠️ DO NOT USE QUOTES AROUND FIELD NAMES ⚠️


      You MUST respond in EXACTLY this simple key-value format (one field per line):


      DOCUMENT_TYPE: [document type from image]

      BUSINESS_ABN: [ABN number from document or NOT_FOUND]

      SUPPLIER_NAME: [store name from document]

      BUSINESS_ADDRESS: [store address from document or NOT_FOUND]

      PAYER_NAME: [customer name from document or NOT_FOUND]

      PAYER_ADDRESS: [customer address from document or NOT_FOUND]

      INVOICE_DATE: [transaction date from document]

      LINE_ITEM_DESCRIPTIONS: [item1 | item2 | item3]

      LINE_ITEM_QUANTITIES: [qty1 | qty2 | qty3]

      LINE_ITEM_PRICES: [$price1 | $price2 | $price3]

      LINE_ITEM_TOTAL_PRICES: [$total1 | $total2 | $total3]

      IS_GST_INCLUDED: [true or false]

      GST_AMOUNT: [$amount from document or NOT_FOUND]

      TOTAL_AMOUNT: [$total from document]


      FORBIDDEN FORMATS:

      ❌ {"DOCUMENT_TYPE": "RECEIPT"} - NO JSON

      ❌ **DOCUMENT_TYPE:** RECEIPT - NO MARKDOWN

      ❌ DOCUMENT_TYPE = RECEIPT - NO EQUALS

      ❌ Any format with { } quotes or ** formatting


      REQUIRED FORMAT:

      ✅ DOCUMENT_TYPE: RECEIPT - SIMPLE COLON FORMAT ONLY


      Remember: NO CURLY BRACES, NO QUOTES, NO MARKDOWN - JUST FIELD_NAME: value


      Provide EXACTLY 14 lines in the format shown above.

      '
