%%{init: {'theme':'base', 'themeVariables': { 'primaryColor':'#E8F4F8','primaryTextColor':'#2C3E50','primaryBorderColor':'#2C3E50','lineColor':'#34495E'}}}%%
flowchart LR
    Header["<b>WHY POSITION-AWARE<br/>F1 IS CRITICAL</b>"]

    Header --> Correct
    Header --> Wrong

    subgraph Correct["âœ… CORRECT ALIGNMENT"]
        direction TB
        C1["<b>Extracted:</b><br/>Date: ['16-Jul', '18-Jul', '20-Jul']<br/>Desc: ['Woolworths', 'Pizza', 'Utilities']<br/>Amt: ['45.20', '28.50', '127.80']"]
        C2["<b>Check:</b><br/>16-Julâ†”Woolworthsâ†”$45.20âœ“<br/>18-Julâ†”Pizzaâ†”$28.50âœ“<br/>20-Julâ†”Utilitiesâ†”$127.80âœ“"]
        C3["<b>Metrics:</b><br/>Position-Aware: 100%âœ…<br/>Position-Agnostic: 100%âœ…"]
    end

    subgraph Wrong["âŒ DATES SHUFFLED"]
        direction TB
        W1["<b>Extracted (ERROR):</b><br/>Date: ['18-Jul', '16-Jul', '20-Jul']âŒ<br/>Desc: ['Woolworths', 'Pizza', 'Utilities']<br/>Amt: ['45.20', '28.50', '127.80']"]
        W2["<b>Check:</b><br/>18-Julâ†”WoolworthsâŒWRONG!<br/>16-Julâ†”PizzaâŒWRONG!<br/>20-Julâ†”Utilitiesâœ“Only this OK"]
        W3["<b>Metrics:</b><br/>Position-Aware: 33%âš ï¸<br/>Position-Agnostic: 100%âŒ<br/>FAILS to detect error!"]
    end

    Insight["<b>ğŸ¯ INSIGHT:</b><br/>Position-Aware detects<br/>semantic misalignment<br/><br/>Position-Agnostic scores<br/>100% on CORRUPT data!<br/><br/>Date[i]â†”Desc[i]â†”Amt[i]<br/>must be SAME transaction"]

    Correct --> Insight
    Wrong --> Insight

    style Header fill:#E8F4F8,stroke:#2C3E50,stroke-width:3px
    style Correct fill:#E8F5E9,stroke:#4CAF50,stroke-width:2px
    style Wrong fill:#FFE6E6,stroke:#C73E1D,stroke-width:2px
    style Insight fill:#F0E6FF,stroke:#A23B72,stroke-width:3px
