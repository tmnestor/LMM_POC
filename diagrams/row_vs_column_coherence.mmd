%%{init: {'theme':'base', 'themeVariables': { 'primaryColor':'#e8f4f8','primaryTextColor':'#000','primaryBorderColor':'#2c5f77','lineColor':'#2c5f77','secondaryColor':'#fef5e7','tertiaryColor':'#fff'}}}%%

graph LR
    subgraph GT["<b>Ground Truth: Bank Statement Transactions</b>"]
        GT_Table["<table style='border-collapse: collapse; width: 100%; font-size: 13px;'>
        <tr style='background-color: #2c5f77; color: white;'>
            <th style='border: 2px solid #2c5f77; padding: 8px;'>Date</th>
            <th style='border: 2px solid #2c5f77; padding: 8px;'>Description</th>
            <th style='border: 2px solid #2c5f77; padding: 8px;'>Debit</th>
            <th style='border: 2px solid #2c5f77; padding: 8px;'>Credit</th>
        </tr>
        <tr style='background-color: #e8f4f8;'>
            <td style='border: 2px solid #2c5f77; padding: 8px;'>2024-01-15</td>
            <td style='border: 2px solid #2c5f77; padding: 8px;'>EFTPOS Withdrawal GROCERY</td>
            <td style='border: 2px solid #2c5f77; padding: 8px;'>$87.50</td>
            <td style='border: 2px solid #2c5f77; padding: 8px;'>-</td>
        </tr>
        <tr style='background-color: #fff;'>
            <td style='border: 2px solid #2c5f77; padding: 8px;'>2024-01-16</td>
            <td style='border: 2px solid #2c5f77; padding: 8px;'>Salary Deposit</td>
            <td style='border: 2px solid #2c5f77; padding: 8px;'>-</td>
            <td style='border: 2px solid #2c5f77; padding: 8px;'>$3,200.00</td>
        </tr>
        <tr style='background-color: #e8f4f8;'>
            <td style='border: 2px solid #2c5f77; padding: 8px;'>2024-01-17</td>
            <td style='border: 2px solid #2c5f77; padding: 8px;'>ATM Cash Withdrawal</td>
            <td style='border: 2px solid #2c5f77; padding: 8px;'>$100.00</td>
            <td style='border: 2px solid #2c5f77; padding: 8px;'>-</td>
        </tr>
        <tr style='background-color: #fff;'>
            <td style='border: 2px solid #2c5f77; padding: 8px;'>2024-01-18</td>
            <td style='border: 2px solid #2c5f77; padding: 8px;'>Online Payment UTILITIES</td>
            <td style='border: 2px solid #2c5f77; padding: 8px;'>$145.80</td>
            <td style='border: 2px solid #2c5f77; padding: 8px;'>-</td>
        </tr>
        </table>"]
    end

    subgraph COL["<b>‚ùå Column-Wise Extraction (BROKEN)</b>"]
        COL_Desc["<b style='color: #c0392b;'>Independent column extraction causes misalignment</b><br/><br/>"]
        COL_Table["<table style='border-collapse: collapse; width: 100%; font-size: 12px;'>
        <tr style='background-color: #c0392b; color: white;'>
            <th style='border: 2px solid #c0392b; padding: 6px;'>Date</th>
            <th style='border: 2px solid #c0392b; padding: 6px;'>Description</th>
            <th style='border: 2px solid #c0392b; padding: 6px;'>Debit</th>
            <th style='border: 2px solid #c0392b; padding: 6px;'>Credit</th>
        </tr>
        <tr style='background-color: #fadbd8;'>
            <td style='border: 2px solid #c0392b; padding: 6px;'>2024-01-15</td>
            <td style='border: 2px solid #c0392b; padding: 6px;'>EFTPOS Withdrawal GROCERY</td>
            <td style='border: 2px solid #c0392b; padding: 6px;'>$87.50</td>
            <td style='border: 2px solid #c0392b; padding: 6px;'>-</td>
        </tr>
        <tr style='background-color: #f9ebea;'>
            <td style='border: 2px solid #c0392b; padding: 6px; background-color: #e74c3c; color: white;'><b>MISSING</b></td>
            <td style='border: 2px solid #c0392b; padding: 6px;'>Salary Deposit</td>
            <td style='border: 2px solid #c0392b; padding: 6px;'>-</td>
            <td style='border: 2px solid #c0392b; padding: 6px;'>$3,200.00</td>
        </tr>
        <tr style='background-color: #fadbd8;'>
            <td style='border: 2px solid #c0392b; padding: 6px;'>2024-01-17</td>
            <td style='border: 2px solid #c0392b; padding: 6px; background-color: #e74c3c; color: white;'><b>MISSING</b></td>
            <td style='border: 2px solid #c0392b; padding: 6px;'>$100.00</td>
            <td style='border: 2px solid #c0392b; padding: 6px; background-color: #8e44ad; color: white;'><b>SHIFTED!</b></td>
        </tr>
        <tr style='background-color: #f9ebea;'>
            <td style='border: 2px solid #c0392b; padding: 6px;'>2024-01-18</td>
            <td style='border: 2px solid #c0392b; padding: 6px;'>Online Payment UTILITIES</td>
            <td style='border: 2px solid #c0392b; padding: 6px;'>$145.80</td>
            <td style='border: 2px solid #c0392b; padding: 6px; background-color: #8e44ad; color: white;'><b>SHIFTED!</b></td>
        </tr>
        </table>"]
        COL_Problem["<b style='color: #c0392b; font-size: 14px;'>üî¥ CATASTROPHIC PROBLEM:</b><br/>
        ‚Ä¢ Row 2: Date missing ‚Üí All columns shift up<br/>
        ‚Ä¢ Row 3: Description missing ‚Üí Credit column misaligns<br/>
        ‚Ä¢ <b style='color: #8e44ad;'>$3,200 SALARY CREDIT appears as ATM DEBIT!</b><br/>
        ‚Ä¢ IMPOSSIBLE TO RECOVER - Credits confused with Debits!<br/>
        ‚Ä¢ Data below first error is corrupted"]
    end

    subgraph ROW["<b>‚úÖ Row-Wise Extraction (RECOVERABLE)</b>"]
        ROW_Desc["<b style='color: #27ae60;'>Entire rows extracted together maintain coherence</b><br/><br/>"]
        ROW_Table["<table style='border-collapse: collapse; width: 100%; font-size: 12px;'>
        <tr style='background-color: #27ae60; color: white;'>
            <th style='border: 2px solid #27ae60; padding: 6px;'>Date</th>
            <th style='border: 2px solid #27ae60; padding: 6px;'>Description</th>
            <th style='border: 2px solid #27ae60; padding: 6px;'>Debit</th>
            <th style='border: 2px solid #27ae60; padding: 6px;'>Credit</th>
        </tr>
        <tr style='background-color: #d5f4e6;'>
            <td style='border: 2px solid #27ae60; padding: 6px;'>2024-01-15</td>
            <td style='border: 2px solid #27ae60; padding: 6px;'>EFTPOS Withdrawal GROCERY</td>
            <td style='border: 2px solid #27ae60; padding: 6px;'>$87.50</td>
            <td style='border: 2px solid #27ae60; padding: 6px;'>-</td>
        </tr>
        <tr style='background-color: #abebc6;'>
            <td colspan='4' style='border: 2px solid #27ae60; padding: 6px; background-color: #f39c12; color: white; text-align: center;'><b>ENTIRE ROW MISSING</b> (2024-01-16 | Salary Deposit | - | $3,200.00)</td>
        </tr>
        <tr style='background-color: #d5f4e6;'>
            <td style='border: 2px solid #27ae60; padding: 6px;'>2024-01-17</td>
            <td style='border: 2px solid #27ae60; padding: 6px;'>ATM Cash Withdrawal</td>
            <td style='border: 2px solid #27ae60; padding: 6px;'>$100.00</td>
            <td style='border: 2px solid #27ae60; padding: 6px;'>-</td>
        </tr>
        <tr style='background-color: #eafaf1;'>
            <td style='border: 2px solid #27ae60; padding: 6px;'>2024-01-18</td>
            <td style='border: 2px solid #27ae60; padding: 6px;'>Online Payment UTILITIES</td>
            <td style='border: 2px solid #27ae60; padding: 6px;'>$145.80</td>
            <td style='border: 2px solid #27ae60; padding: 6px;'>-</td>
        </tr>
        </table>"]
        ROW_Success["<b style='color: #27ae60; font-size: 14px;'>üü¢ RECOVERABLE:</b><br/>
        ‚Ä¢ Missing row 2 is a clean failure<br/>
        ‚Ä¢ All other rows remain correctly aligned<br/>
        ‚Ä¢ <b>Credits stay Credits, Debits stay Debits</b><br/>
        ‚Ä¢ Date ‚Üî Description ‚Üî Debit ‚Üî Credit maintained<br/>
        ‚Ä¢ User can identify and fix single missing transaction"]
    end

    GT --> COL
    GT --> ROW

    style GT fill:#e8f4f8,stroke:#2c5f77,stroke-width:3px
    style COL fill:#fadbd8,stroke:#c0392b,stroke-width:3px
    style ROW fill:#d5f4e6,stroke:#27ae60,stroke-width:3px
    style GT_Table fill:#fff,stroke:none
    style COL_Table fill:#fff,stroke:none
    style ROW_Table fill:#fff,stroke:none
    style COL_Desc fill:#fadbd8,stroke:none
    style ROW_Desc fill:#d5f4e6,stroke:none
    style COL_Problem fill:#fadbd8,stroke:none
    style ROW_Success fill:#d5f4e6,stroke:none
